version: 2
models:
  - name: fanouts_users
    columns:
      - name: user_id
        description: "Unique identifier for this user"
        meta:
          dimension:
            type: string
          metrics:
            inflated_user_count:
              type: count
              label: "üö® INFLATED User Count"
              description: "‚ùå WRONG: If grain of data is not at user level then this will be
                inflated"
            unique_user_count:
              type: count_distinct
              label: "‚úÖ FANOUT SAFE Unique User Count"
              description: "‚úÖ CORRECT: Uses count_distinct so won't inflate"

      - name: account_id
        description: "Links to the account table"
        meta:
          dimension:
            type: string

      - name: job_title
        description: "Role within organization"
        meta:
          dimension:
            type: string
          metrics:
            unique_job_title_count:
              type: count_distinct
              label: "‚úÖ FANOUT SAFE Unique Job Title Count"
              description: "‚úÖ CORRECT: Uses count_distinct so won't inflate"
            inflated_job_title_count:
              type: count
              label: "üö® INFLATED Job Title Count"
              description: "‚ùå WRONG: this will be incorrect regardless of the grain of the
                data because job titles are not unique in the users table. "

      - name: is_marketing_opted_in
        description: "Marketing communication preference (0/1)"
        meta:
          dimension:
            type: boolean
      - name: email
        description: ""
        meta:
          dimension:
            type: string
      - name: created_at
        description: ""
        meta:
          dimension:
            type: timestamp
      - name: first_logged_in_at
        description: ""
        meta:
          dimension:
            type: timestamp
      - name: latest_logged_in_at
        description: ""
        meta:
          dimension:
            type: timestamp
